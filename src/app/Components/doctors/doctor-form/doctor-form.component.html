<form [formGroup]="doctorForm" (ngSubmit)="saveDoctor()" class="shadow rounded p-5 my-3">
  <!-- Name field -->
  <div class="form-group">
    <label for="name">Name</label>
    <input formControlName="name" type="text" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('name')?.invalid && doctorForm.get('name')?.touched}" />
    <div *ngIf="doctorForm.get('name')?.invalid && doctorForm.get('name')?.touched" class="text-danger">
      Name is required.
    </div>
  </div>

  <!-- Department field -->
  <div class="form-group">
    <label for="department">Department</label>
    <select formControlName="department" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('department')?.invalid && doctorForm.get('department')?.touched}">
      <option *ngFor="let department of departments" [value]="department._id">{{ department.name }}</option>
    </select>
    <div *ngIf="doctorForm.get('department')?.invalid && doctorForm.get('department')?.touched" class="text-danger">
      Department is required.
    </div>
  </div>

  <!-- Specialization field -->
  <div class="form-group">
    <label for="specialization">Specialization</label>
    <select formControlName="specialization" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('specialization')?.invalid && doctorForm.get('specialization')?.touched}">
      <option *ngFor="let specialist of specialists" [value]="specialist">{{ specialist }}</option>
    </select>
    <div *ngIf="doctorForm.get('specialization')?.invalid && doctorForm.get('specialization')?.touched" class="text-danger">
      Specialization is required.
    </div>
  </div>

  <!-- Gender field -->
  <div class="form-group">
    <label for="gender">Gender</label>
    <select formControlName="gender" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('gender')?.invalid && doctorForm.get('gender')?.touched}">
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>
    <div *ngIf="doctorForm.get('gender')?.invalid && doctorForm.get('gender')?.touched" class="text-danger">
      Gender is required.
    </div>
  </div>

  <!-- Username field -->
  <div class="form-group">
    <label for="userName">Username</label>
    <input formControlName="userName" type="text" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('userName')?.invalid && doctorForm.get('userName')?.touched}" />
    <div *ngIf="doctorForm.get('userName')?.invalid && doctorForm.get('userName')?.touched" class="text-danger">
      Username is required.
    </div>
  </div>

  <!-- National ID field -->
  <div class="form-group">
    <label for="nationalID">National ID</label>
    <input formControlName="nationalID" type="text" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('nationalID')?.invalid && doctorForm.get('nationalID')?.touched}" />
    <div *ngIf="doctorForm.get('nationalID')?.invalid && doctorForm.get('nationalID')?.touched" class="text-danger">
      National ID is required.
    </div>
  </div>

  <div formGroupName="contactInfo">
    <label for="email">Email:</label>
    <input id="email" type="email" formControlName="email" />
    <div *ngIf="doctorForm.get('contactInfo.email')?.invalid && doctorForm.get('contactInfo.email')?.touched">
      Please provide a valid email.
    </div>
  
    <label for="phone">Phone Number:</label>
    <input id="phone" type="text" formControlName="phone" />
    <div *ngIf="doctorForm.get('contactInfo.phone')?.invalid && doctorForm.get('contactInfo.phone')?.touched">
      Please provide a valid phone number.
    </div>
  </div>
  <!-- Date of Birth field -->
  <div class="form-group">
    <label for="dateOfBirth">Date of Birth</label>
    <input formControlName="dateOfBirth" type="date" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('dateOfBirth')?.invalid && doctorForm.get('dateOfBirth')?.touched}" />
    <div *ngIf="doctorForm.get('dateOfBirth')?.invalid && doctorForm.get('dateOfBirth')?.touched" class="text-danger">
      Date of Birth is required.
    </div>
  </div>

  <!-- Experience field -->
  <div class="form-group">
    <label for="experience">Experience</label>
    <input formControlName="experience" type="text" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('experience')?.invalid && doctorForm.get('experience')?.touched}" />
    <div *ngIf="doctorForm.get('experience')?.invalid && doctorForm.get('experience')?.touched" class="text-danger">
      Experience is required.
    </div>
  </div>

  <!-- History field -->
  <div class="form-group">
    <label for="history">History</label>
    <textarea formControlName="history" class="form-control" [ngClass]="{'is-invalid': doctorForm.get('history')?.invalid && doctorForm.get('history')?.touched}"></textarea>
    <div *ngIf="doctorForm.get('history')?.invalid && doctorForm.get('history')?.touched" class="text-danger">
      History is required.
    </div>
  </div>

  <!-- Available Appointments field -->
  <div class="form-group">
    <label for="availableAppointments">Available Appointments</label>
    <div class="form-group">
      <label>Select Date and Time:</label>
      <input
        type="text"
        class="form-control"
        placeholder="Select dates"
        bsDatepicker
        [bsConfig]="datePickerConfig"
        (bsValueChange)="onDateTimeChange($event)"
      />
      <input
        type="time"
        class="form-control mt-2"
        placeholder="Select Time"
        (change)="onTimeChange($event)"
      />
    </div>
    <ul>
      <li *ngFor="let appointment of availableAppointments">
        {{ appointment.date }} at {{ appointment.time }}
        <button type="button" class="btn btn-danger btn-sm" (click)="removeAppointment(appointment)">Remove</button>
      </li>
    </ul>
  </div>

  <!-- Image Upload field -->
  <div class="form-group">
    <label for="image">Upload Image</label>
    <input type="file" class="form-control" (change)="onFileChange($event)" />
  </div>

  <!-- Submit Button -->
  <button type="submit" class="btn btn-primary w-25">Save</button>
</form>
